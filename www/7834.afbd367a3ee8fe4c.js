"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7834],{7834:(Q,v,l)=>{l.r(v),l.d(v,{TabsPageModule:()=>Y});var g=l(177),f=l(4341),u=l(5374),t=l(3953),_=l(9615),h=l(3656),T=l(3427);let j=(()=>{var s;class i{constructor(e,n){this.authservice=e,this.nav=n}ionViewWillEnter(){this.user=this.authservice.currentUserValue;var e=JSON.parse(this.authservice.currentUserValue.role);this.user.userRole=e.roleName}logout(){this.authservice.setAuthToken("").then(e=>{localStorage.clear(),this.nav.navigateForward("login")}).catch(e=>{console.error(e)})}gotoTaskView(){this.nav.navigateForward("task")}}return(s=i).\u0275fac=function(e){return new(e||s)(t.rXU(_.u),t.rXU(h.q9))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-profile"]],decls:38,vars:11,consts:[[3,"pageName"],[1,"position-relative"],[1,"top-container"],[1,"heading"],[1,"row","profile-section"],[1,"col-md-4","text-center"],[1,"img-fluid","rounded-circle","mb-3","profile-img",3,"src","alt"],[1,"text-muted"],[1,"col-md-8"],[1,"mt-3"],[1,"mb-1"],[1,"d-flex","justify-content-end","mt-5"],["shape","round","type","submit","fill","solid","color","danger",1,"sign-btn",3,"click"]],template:function(e,n){1&e&&(t.nrm(0,"app-header",0),t.j41(1,"ion-content")(2,"div",1)(3,"div",2)(4,"h5",3),t.EFF(5,"Profile"),t.k0s()(),t.j41(6,"div",4)(7,"div",5),t.nrm(8,"img",6),t.j41(9,"h3"),t.EFF(10),t.k0s(),t.j41(11,"p",7),t.EFF(12),t.k0s()(),t.j41(13,"div",8)(14,"h5"),t.EFF(15,"About"),t.k0s(),t.j41(16,"p"),t.EFF(17),t.j41(18,"b"),t.EFF(19),t.k0s(),t.EFF(20," at the organization "),t.k0s(),t.j41(21,"h5",9),t.EFF(22,"Account Details"),t.k0s(),t.j41(23,"p",10)(24,"strong"),t.EFF(25,"User Role:"),t.k0s(),t.EFF(26),t.k0s(),t.j41(27,"p",10)(28,"strong"),t.EFF(29,"Email:"),t.k0s(),t.EFF(30),t.k0s(),t.j41(31,"p")(32,"strong"),t.EFF(33,"Phone:"),t.k0s(),t.EFF(34),t.k0s(),t.j41(35,"div",11)(36,"ion-button",12),t.bIt("click",function(){return n.logout()}),t.EFF(37,"Logout"),t.k0s()()()()()()),2&e&&(t.Y8G("pageName","Profile"),t.R7$(8),t.FS9("alt",null==n.user?null:n.user.name),t.Y8G("src",null==n.user?null:n.user.profilePictureUrl,t.B4B),t.R7$(2),t.JRh(null==n.user?null:n.user.name),t.R7$(2),t.JRh(null==n.user?null:n.user.userName),t.R7$(5),t.Lme("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName," is a "),t.R7$(2),t.JRh(null==n.user?null:n.user.userType),t.R7$(7),t.SpI(" ",null!=n.user&&n.user.userRole?n.user.userRole:"-",""),t.R7$(4),t.SpI(" ",null!=n.user&&n.user.emailAddress?n.user.emailAddress:"-",""),t.R7$(4),t.SpI(" ",null!=n.user&&n.user.phoneNo?n.user.phoneNo:"-",""))},dependencies:[u.Jm,u.W9,T.l],styles:[".profile-img[_ngcontent-%COMP%]{height:128px;width:128px;object-fit:cover;border:2px solid #5f8eb3}.top-container[_ngcontent-%COMP%]{background-color:#152733;height:200px;border-bottom-right-radius:15px;border-bottom-left-radius:15px;text-align:center;padding-top:50px;background-image:url(background.8af391483acf11b5.jpg);background-blend-mode:color-dodge}.profile-section[_ngcontent-%COMP%]{padding-top:1.5rem;position:absolute;top:64%;background:#fff;margin:0 1.2rem;border-top-left-radius:30px;border-top-right-radius:30px}.heading[_ngcontent-%COMP%]{font-size:1.8rem;color:#fff}"]}),i})();var p=l(9860),b=l(467),F=l(617);const P=(0,l(5083).F3)("App",{web:()=>l.e(9303).then(l.bind(l,9303)).then(s=>new s.AppWeb)});let y=(()=>{var s;class i{constructor(e,n,r,c){this.platform=e,this.nav=n,this.alertController=r,this.router=c,this.initializeApp()}initializeApp(){var e=this;this.platform.ready().then((0,b.A)(function*(){e.router.events.subscribe(n=>{n instanceof p.Z&&(e.currentRoute=n.url,console.log("started",n.url)),n instanceof p.L6&&console.error(n.error),n instanceof p.wF&&(e.currentRoute=n.url,console.log("ended",n.url))}),(!e.currentRoute||"/login"===e.currentRoute)&&(e.currentRoute="/tabs/tabs/home"),P.addListener("backButton",(0,b.A)(function*(){console.log("currentRoute",e.currentRoute),"/tabs/tabs/home"===e.currentRoute?(yield e.presentAlertWithPromise(null,"Are you sure you want to close the App?"))&&P.exitApp():e.currentRoute&&"/tabs/tabs/tasks"!==e.currentRoute&&"/tabs/tabs/profile"!==e.currentRoute?e.nav.pop():e.ionTabs.select("home")}))}))}presentAlertWithPromise(e,n){var r=this;return(0,b.A)(function*(){const c=yield r.alertController.create({header:e||"Confirm Action",message:new F.Vk(n||"Are you sure you want to exit App?"),buttons:[{text:"Cancel",role:"cancel",handler:()=>!1},{text:"OK",role:"confirm",handler:()=>!0}]});return yield c.present(),new Promise(a=>{c.onDidDismiss().then(d=>{a("confirm"===d.role)})})})()}}return(s=i).\u0275fac=function(e){return new(e||s)(t.rXU(h.OD),t.rXU(h.q9),t.rXU(u.hG),t.rXU(p.Ix))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-tabs"]],viewQuery:function(e,n){if(1&e&&t.GBs(u.p4,7),2&e){let r;t.mGM(r=t.lsd())&&(n.ionTabs=r.first)}},decls:14,vars:0,consts:[["slot","bottom"],["tab","home"],["name","home"],["tab","tasks"],["name","calendar"],["tab","profile"],["name","person"]],template:function(e,n){1&e&&(t.j41(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),t.nrm(3,"ion-icon",2),t.j41(4,"ion-label"),t.EFF(5,"Home"),t.k0s()(),t.j41(6,"ion-tab-button",3),t.nrm(7,"ion-icon",4),t.j41(8,"ion-label"),t.EFF(9,"Tasks"),t.k0s()(),t.j41(10,"ion-tab-button",5),t.nrm(11,"ion-icon",6),t.j41(12,"ion-label"),t.EFF(13,"Profile"),t.k0s()()()())},dependencies:[u.iq,u.he,u.Jq,u.qW,u.p4],styles:["ion-tab-button[_ngcontent-%COMP%]{--color-selected: #00a7ff;--color: #dfdfdf;background-color:transparent}ion-tab-bar[_ngcontent-%COMP%]{background:#152733}"]}),i})();var E=l(9350),S=l(9952),k=l(7709),O=l(963),x=l(7907);function w(s,i){if(1&s){const o=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){const n=t.eBV(o).$implicit,r=t.XpG();return t.Njj(r.onStatusChange(n.id))}),t.EFF(1),t.k0s()}if(2&s){const o=i.$implicit,e=t.XpG();t.Y8G("ngClass",o.id===e.selectedStatus?o.cssClass+" selected":"inactive"),t.R7$(),t.SpI(" ",o.status," ")}}function A(s,i){1&s&&(t.qex(0),t.j41(1,"div",10)(2,"div",11)(3,"span",12),t.EFF(4,"Loading..."),t.k0s()()(),t.bVm())}function G(s,i){if(1&s){const o=t.RV6();t.j41(0,"ion-item",15)(1,"div",16),t.bIt("click",function(){const n=t.eBV(o).$implicit,r=t.XpG(3);return t.Njj(r.viewTask(n))}),t.j41(2,"div")(3,"p",17)(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"h6",18),t.EFF(7),t.k0s(),t.j41(8,"p",19),t.EFF(9),t.k0s()()()()}if(2&s){const o=i.$implicit,e=t.XpG(3);t.R7$(3),t.Y8G("ngClass",e.getStatusClass(o)),t.R7$(2),t.JRh(o.status),t.R7$(2),t.JRh(e.padZero(o.id,3)+" - "+o.title),t.R7$(2),t.SpI("Estimated Time: ",o.estimatedHours," hours")}}function N(s,i){if(1&s){const o=t.RV6();t.qex(0),t.j41(1,"ion-list"),t.DNE(2,G,10,4,"ion-item",13),t.k0s(),t.j41(3,"ion-infinite-scroll",14),t.bIt("ionInfinite",function(n){t.eBV(o);const r=t.XpG(2);return t.Njj(r.onIonInfinite(n))}),t.nrm(4,"ion-infinite-scroll-content"),t.k0s(),t.bVm()}if(2&s){const o=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",o.filteredTasks)}}function V(s,i){1&s&&(t.j41(0,"div",20)(1,"p"),t.EFF(2,"No tasks available"),t.k0s()())}function U(s,i){if(1&s&&t.DNE(0,N,5,1,"ng-container",8)(1,V,3,0,"ng-template",null,1,t.C5r),2&s){const o=t.sdS(2),e=t.XpG();t.Y8G("ngIf",e.filteredTasks.length>0)("ngIfElse",o)}}let $=(()=>{var s;class i{constructor(e,n,r,c,a){this.nav=e,this.alertController=n,this.toastController=r,this.sharedService=c,this.apiService=a,this.isLoading=!0,this.totalPages=0,this.totalCount=0,this.currentPage=1,this.pageSize=50,this.taskFilter=new S.vm,this.tasksList=[],this.filteredTasks=[],this.searchTerm="",this.selectedStatus=null,this.statuses=[{id:null,status:"All",cssClass:"inactive"},{id:1,status:"Not Started",cssClass:"not-started"},{id:2,status:"In Progress",cssClass:"inprogress"},{id:3,status:"Completed",cssClass:"completed"},{id:4,status:"On Hold",cssClass:"onhold"}]}ionViewWillEnter(){this.getTasks()}onIonInfinite(e){this.currentPage++,this.getTasks().then(()=>{e.target.complete()})}getTasks(){var e=this;return(0,b.A)(function*(){e.taskFilter.pageNumber=e.currentPage,e.taskFilter.pageSize=10;try{const r=yield function I(s,i){const o="object"==typeof i;return new Promise((e,n)=>{let c,r=!1;s.subscribe({next:a=>{c=a,r=!0},error:n,complete:()=>{r?e(c):o?e(i.defaultValue):n(new E.G)}})})}(e.apiService.getTasksMobileByUserId(e.taskFilter));e.isLoading=!1;let c=[];var n;"success"===r.status&&(c=r.data,(null===(n=c)||void 0===n?void 0:n.length)>0&&(e.totalCount=c[0].totalRecords?c[0].totalRecords:0,c.forEach(a=>{if(a.assignee)try{var d;const m=a.assignee.split(", ");a.taskAssignee=m.map(C=>{const[H,z,W,J,R]=C.split(";");return{Id:parseInt(H,10),Name:z.trim(),ProfilePictureUrl:W.trim(),EstimatedHours:Number(J.trim()),RatesPerHour:R?Number(R.trim()):null}}),a.firstAssignee=a.assignee.split(",")[0];const D=a.assignee.split(",");a.assigneeIds=D.map(C=>parseInt(C.split(";")[0])),a.checklists=(0,k.Q8)((null===(d=a.checkListJSON)||void 0===d?void 0:d.toString())||"[]")}catch(m){console.error(m)}a.tagIdsString&&(a.tagIds=a.tagIdsString.split(",").map(m=>parseInt(m)))}),e.tasksList=1===e.currentPage?c:[...e.tasksList,...c],e.filteredTasks=e.tasksList))}catch(r){e.isLoading=!1,console.error("Error fetching tasks:",r)}})()}filterTasks(){this.filteredTasks=this.tasksList.filter(e=>{const n=this.searchTerm.toLowerCase(),r=!!e.title&&e.title.toLowerCase().includes(n),c=!!e.id&&e.id.toString().includes(n);return(r||c)&&(null===this.selectedStatus||e.taskStatusId===this.selectedStatus)})}onStatusChange(e){this.selectedStatus=this.selectedStatus===e?null:e,this.filterTasks()}viewTask(e){this.sharedService.setTask(e),this.nav.navigateForward("/task")}getStatusClass(e){return(0,k.pR)(e)}padZero(e,n){return"#"+(0,k.au)(e,n)}}return(s=i).\u0275fac=function(e){return new(e||s)(t.rXU(h.q9),t.rXU(u.hG),t.rXU(u.K_),t.rXU(O.d),t.rXU(x.G))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-tasks"]],decls:12,vars:4,consts:[["content",""],["noTasksMessage",""],[1,"sticky-top","filters"],[1,"form-group","position-relative"],["name","search",1,"search-icon"],["type","text","placeholder","Search Tasks",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"btn-group","mt-3","mb-1"],["class","status bg border badge rounded-pill bg-white me-2",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"status","bg","border","badge","rounded-pill","bg-white","me-2",3,"click","ngClass"],[1,"loading-container"],["role","status",1,"loader1"],[1,"visually-hidden"],["class","mb-2",4,"ngFor","ngForOf"],[3,"ionInfinite"],[1,"mb-2"],[1,"d-flex","justify-content-between",3,"click"],[1,"status","bg","border","badge","rounded-pill","mb-2",3,"ngClass"],[1,"task-title"],[1,"task-time"],[1,"no-tasks-message"]],template:function(e,n){if(1&e){const r=t.RV6();t.nrm(0,"app-header"),t.j41(1,"ion-content")(2,"div")(3,"div",2)(4,"div",3),t.nrm(5,"ion-icon",4),t.j41(6,"input",5),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(n.searchTerm,a)||(n.searchTerm=a),t.Njj(a)}),t.bIt("input",function(){return t.eBV(r),t.Njj(n.filterTasks())}),t.k0s()(),t.j41(7,"div",6),t.DNE(8,w,2,2,"button",7),t.k0s()(),t.DNE(9,A,5,0,"ng-container",8)(10,U,3,2,"ng-template",null,0,t.C5r),t.k0s()()}if(2&e){const r=t.sdS(11);t.R7$(6),t.R50("ngModel",n.searchTerm),t.R7$(2),t.Y8G("ngForOf",n.statuses),t.R7$(),t.Y8G("ngIf",n.isLoading)("ngIfElse",r)}},dependencies:[g.YU,g.Sq,g.bT,u.W9,u.iq,u.Ax,u.Hp,u.uz,u.nf,f.me,f.BC,f.vS,T.l],styles:['.status-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:10px}.status-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px}.sticky-top[_ngcontent-%COMP%]{top:-58px}.status[_ngcontent-%COMP%]{position:relative}.status.selected[_ngcontent-%COMP%]{font-weight:700}.status.selected[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:-8px;height:3px;background-color:#f90;border-radius:2px}.status.border[_ngcontent-%COMP%]{border:.05rem solid #cdcbcc!important}.filters[_ngcontent-%COMP%]{--bs-bg-opacity: 1;background-color:#152733;padding:1rem!important;margin-bottom:.25rem!important;box-shadow:0 1px 2px #bfbfbf}.form-group[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:#ccc;pointer-events:none;font-size:1.5rem}input.form-control[_ngcontent-%COMP%]{padding-left:40px}.task-title[_ngcontent-%COMP%]{font-weight:500;color:#16716e;margin-bottom:.5rem!important}.task-status[_ngcontent-%COMP%], .task-time[_ngcontent-%COMP%]{margin-bottom:1px;font-weight:600;color:#3b1749}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:75vh;text-align:center}.item-inner[_ngcontent-%COMP%]{border:none!important}.item-lines-default[_ngcontent-%COMP%]{margin:0rem .7rem;border-radius:5px}ion-item[_ngcontent-%COMP%]{--inner-border-width: 0px;--background: #f7fafd96;--inner-padding-top: .7rem !important;--inner-padding-bottom: .7rem;--border-color: #b6cdf7;--border-width: 1px;--border-style: solid;--border-radius: 10px}.btn-group[_ngcontent-%COMP%]{display:flex;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}.btn-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}']}),i})();const L=[{path:"tabs",component:y,children:[{path:"home",component:l(8299).B},{path:"tasks",component:$},{path:"profile",component:j}]},{path:"",redirectTo:"tabs/home",pathMatch:"full"}];let B=(()=>{var s;class i{}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[p.iI.forChild(L),p.iI]}),i})(),Y=(()=>{var s;class i{}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[g.MD,f.YN,u.bv,B]}),i})()}}]);